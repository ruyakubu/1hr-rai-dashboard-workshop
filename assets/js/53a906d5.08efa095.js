"use strict";(self.webpackChunkrai_workshop=self.webpackChunkrai_workshop||[]).push([[447],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var i=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=i.createContext({}),d=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):n(n({},t),e)),r},c=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(r),h=a,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||o;return r?i.createElement(m,n(n({ref:t},c),{},{components:r})):i.createElement(m,n({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,n=new Array(o);n[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,n[1]=s;for(var d=2;d<o;d++)n[d]=r[d];return i.createElement.apply(null,n)}return i.createElement.apply(null,r)}h.displayName="MDXCreateElement"},1152:(e,t,r)=>{r.r(t),r.d(t,{contentTitle:()=>n,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=r(7462),a=(r(7294),r(3905));const o={title:"Local Feature Importance",sidebar_position:1,slug:"/view-individual-feature-importance"},n=void 0,s={unversionedId:"lab4-feature-importance/view-individual-feature-importance",id:"lab4-feature-importance/view-individual-feature-importance",isDocsHomePage:!1,title:"Local Feature Importance",description:"The RAI dashboard Feature Importance component has a table view that enables users to see which records the model made a correct vs incorrect prediction.  You can use each individual patient's record to see which features positively or negatively drove the model outcome for that individual. This is especially useful when debugging to see why the model's prediction is incorrect for a specific patient, and which features are positive or negative contributors.   In our case, you'll focus on the cohort with the highest errors.",source:"@site/docs/lab4-feature-importance/view-individual-feature-importance.md",sourceDirName:"lab4-feature-importance",slug:"/view-individual-feature-importance",permalink:"/1hr-rai-dashboard-workshop/docs/view-individual-feature-importance",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/lab4-feature-importance/view-individual-feature-importance.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Local Feature Importance",sidebar_position:1,slug:"/view-individual-feature-importance"},sidebar:"tutorialSidebar",previous:{title:"Global Feature Importance",permalink:"/1hr-rai-dashboard-workshop/docs/view-feature-importance"},next:{title:"Shutdown",permalink:"/1hr-rai-dashboard-workshop/docs/stop-compute"}},l=[{value:"Individual conditional expectation (using ICE plot)",id:"individual-conditional-expectation-using-ice-plot",children:[]},{value:"Shutdown",id:"shutdown",children:[]}],d={toc:l},c="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(c,(0,i.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The RAI dashboard Feature Importance component has a table view that enables users to see which records the model made a correct vs incorrect prediction.  You can use each individual patient's record to see which features positively or negatively drove the model outcome for that individual. This is especially useful when debugging to see why the model's prediction is incorrect for a specific patient, and which features are positive or negative contributors.   In our case, you'll focus on the cohort with the highest errors."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Individual Feature importance table",src:r(8979).Z,title:"Individual Feature importance table"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'Click on the "switch cohort" link on top of the dashboard.  Then select the ',(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},'"Err: Prior_Inpatient >0; Num_meds >11.50 & <= 21.50"')),' cohort under the "Cohort list" drop-down menu list.')),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Switch cohort",src:r(4873).Z,title:"Switch cohort"}),"\t"),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Under the ",(0,a.kt)("strong",{parentName:"li"},'"Incorrect predictions"')," table view, select record index #882.  This will generate a ",(0,a.kt)("strong",{parentName:"li"},"Feature Important plot")," chart under the Table view.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Individual Feature importance table",src:r(1355).Z,title:"Individual Feature importance table"}),"\t"),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Here you will see that ",(0,a.kt)("em",{parentName:"li"},'"Prior_Inpatient"'),", ",(0,a.kt)("em",{parentName:"li"},'"Age"'),", ",(0,a.kt)("em",{parentName:"li"},'"Max_Glu_Serum"')," and ",(0,a.kt)("em",{parentName:"li"},'"num_medications"')," are the top 4 features that are negative contributors to driving our model incorrectly predicting that the selected patient will not be readmitted within 30 days (outcome should be Readmitted)."),(0,a.kt)("li",{parentName:"ol"},"Confirm that the 4 features from record index #882 are different from the top 4 features we saw above driving the models\u2019 overall predictions from the ",(0,a.kt)("strong",{parentName:"li"},"Aggregate feature importance")," tab."),(0,a.kt)("li",{parentName:"ol"},"Next, the Individual feature importance graph shows that the ",(0,a.kt)("em",{parentName:"li"},'"Admission_source"'),", ",(0,a.kt)("em",{parentName:"li"},'"prior_emergency"'),", ",(0,a.kt)("em",{parentName:"li"},'"gender"')," and ",(0,a.kt)("em",{parentName:"li"},'"insulin"')," positively contributed to the model's outcome (Not Readmitted). Since the model incorrectly predicted record index #882 as Not Readmitted, that means the positively contributing features are erroneous: ",(0,a.kt)("em",{parentName:"li"},'"Admission_source"'),", ",(0,a.kt)("em",{parentName:"li"},'"prior_emergency"'),", ",(0,a.kt)("em",{parentName:"li"},'"gender"')," and ",(0,a.kt)("em",{parentName:"li"},'"insulin"')," since they played a significant role in skewing the model's output for this data point.")),(0,a.kt)("p",null,"As you can see, in trying to debug why a model\u2019s prediction is erroneous for a given data point, this chart provides ML professionals an explanation of which features positively influenced the poor outcome."),(0,a.kt)("h2",{id:"individual-conditional-expectation-using-ice-plot"},"Individual conditional expectation (using ICE plot)"),(0,a.kt)("p",null,"The RAI dashboard gives you the ability to select a feature and see the model's prediction for the different values in that feature using the Individual Conditional Expectation (ICE) plot. We'll use the same patients above:  record index #882 and #865.  In addition, we'll use the \"A1CResult\" feature to see the models prediction for its different values."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'Select the "Individual Conditional Expectation (ICE) plot" radio button. '),(0,a.kt)("li",{parentName:"ol"},"Next, in the Feature drop-down menu, we'll select ",(0,a.kt)("em",{parentName:"li"},'"A1CResult"'),". The orange dots represent record index #882 that the model incorrectly predicted as Not Readmitted. The blue dots represent record index #865 that the model incorrectly predicted as Readmitted.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"ICE feature influence",src:r(5399).Z,title:"ICE feature influence"}),"\t"),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Under The ICE plot, you'll see the model's predictions for the different ",(0,a.kt)("em",{parentName:"li"},'"A1CResult"'),' values: "Norm", ">7", ">8" and "None" (the "None" when no A1C test). '),(0,a.kt)("li",{parentName:"ol"},"As you can see from the chart, a patient has the lowest chance of not being readmitted when the ",(0,a.kt)("em",{parentName:"li"},'"A1CResult"'),' result is ">8" for record index #882 and #865. Both the orange and blue dots are showing the lowest point in their cluster at the ">8" mark on the axis, and the model\'s predicted probability of not readmitted is showing a low probability for both dots at the axis. This makes sense because an A1C result greater than 8 is considered a very high level and is serious for diabetic patients. Hence, the need to be Readmitted in combination with other factors. As you can see, this is a good way to see how a feature\'s value has impact on a model\'s prediction.')),(0,a.kt)("p",null,"This lab shows how the Feature Importance removes the black box way of not knowing how the model went about making a prediction. It\u2019s a global understanding of what key features the model uses to make a prediction. In addition, for each feature the user has the ability to explore and visualize how it is positively or negatively influencing the model\u2019s prediction for one class vs another for each value in the feature. This exposes the thresholds the model has to produce a certain outcome. We saw this in the ",(0,a.kt)("em",{parentName:"p"},"\u201cNumber_Diagnoses\u201d")," feature. "),(0,a.kt)("h2",{id:"shutdown"},"Shutdown"),(0,a.kt)("p",null,"Be sure to ",(0,a.kt)("a",{parentName:"p",href:"/docs/stop-compute"},"shutdown your compute")," instance."))}u.isMDXComponent=!0},5399:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/10-fi-ice-chart-4e135938e478ff25d20d46c0562202be.png"},1355:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/10-fi-selected-datapt-influence-e61cd74c653326851f647a00a95bc6dd.png"},8979:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/10-fi-table-view-74587d988b5321538e4eed413af8b176.png"},4873:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/6-da-switch-cohort-bf7bd7b22e1618fed05807353b55873c.png"}}]);